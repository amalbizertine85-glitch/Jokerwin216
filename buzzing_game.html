<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>3 Buzzing Wilds</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    margin:0;
    background:#022400;
    font-family:Arial, sans-serif;
    color:#fff;
}

/* TOP */
.top{
    height:60px;
    background:#000;
    text-align:center;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:22px;
    font-weight:bold;
}

/* GAME REELS IMAGE */
.game-area{
    width:100%;
    text-align:center;
}
.game-area img{
    width:100%;
    max-height:380px;
    object-fit:cover;
}

/* CONTROLS */
.controls{
    margin-top:10px;
    text-align:center;
    background:#013b00;
    padding:20px 0;
    border-top:3px solid #0f0;
}

.btn{
    background:#111;
    color:#fff;
    padding:10px 18px;
    font-size:20px;
    border-radius:10px;
    margin:0 10px;
    display:inline-block;
    border:2px solid #0f0;
}

.spin{
    background:#0b5;
    font-size:26px;
    padding:14px 22px;
}

/* QUIT BUTTON */
.quit{
    position:fixed;
    bottom:90px;
    right:15px;
    background:#900;
    padding:10px 15px;
    font-size:16px;
    border-radius:8px;
}

/* BOTTOM MENU */
.bottom{
    position:fixed;
    bottom:0;
    left:0;
    right:0;
    height:70px;
    background:#000;
    display:flex;
    justify-content:space-around;
    align-items:center;
}

.bottom-item{
    text-align:center;
    color:#fff;
    font-size:13px;
}
</style>
</head>

<body>

<div class="top">3 Buzzing Wilds</div>

<div class="game-area">
    <img src="buzzing.jpeg">
</div>

<div class="controls">
    <div style="font-size:18px;">Credit: <span id="balance">0</span> TND</div>
    <div style="margin-top:10px; font-size:18px;">Bet: <span id="bet">1</span> TND</div>

    <br>

    <span class="btn" onclick="decreaseBet()">-</span>
    <span class="btn spin" onclick="spin()">‚ü≥</span>
    <span class="btn" onclick="increaseBet()">+</span>
</div>

<a class="quit" href="casino.html">Quit</a>

<div class="bottom">
    <div class="bottom-item">Home</div>
    <div class="bottom-item">Account</div>
    <div class="bottom-item">Sport</div>
    <div class="bottom-item">Slip</div>
</div>


<script>
// ---------------------------
// JSONBIN SETTINGS
// ---------------------------
const BIN_ID = "692eeefbae596e708f7e9e72";
const API_KEY = "$2a$10$hCALb9EdUjLfi38M4RhCMOdm8.1y36yYtLvW0BYdZTfqjpHtlAY7S";

let balance = 0;
let bet = 1;

// Load Balance
async function loadBalance(){
    const res = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
        headers: { "X-Master-Key": API_KEY }
    });
    const data = await res.json();
    balance = data.record.balance;
    document.getElementById("balance").innerText = balance.toFixed(2);
}

// Save Balance
async function saveBalance(){
    await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}`, {
        method:"PUT",
        headers:{
            "Content-Type":"application/json",
            "X-Master-Key": API_KEY
        },
        body:JSON.stringify({ balance })
    });
}

// Bet functions
function decreaseBet(){
    if(bet > 0.2){
        bet = bet - 0.2;
        bet = Math.round(bet * 100)/100;
        document.getElementById("bet").innerText = bet;
    }
}

function increaseBet(){
    bet += 10;
    document.getElementById("bet").innerText = bet;
}

// SPIN (Win rate = 0)
async function spin(){
    if(balance < bet){
        alert("Not enough balance!");
        return;
    }

    balance -= bet;
    document.getElementById("balance").innerText = balance.toFixed(2);

    await saveBalance();
}
    
loadBalance();

</script>
</body>
</html>
