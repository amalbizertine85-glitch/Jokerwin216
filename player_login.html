<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>JOKER216 â€” Login</title>

<style>
    body{
        margin:0;
        font-family:"Segoe UI", Arial, sans-serif;
        background:#002721;
        color:#fff;
    }

    /* Header */
    header{
        background:#013427;
        padding:10px 16px;
        display:flex;
        align-items:center;
        justify-content:space-between;
        border-bottom:1px solid rgba(255,255,255,0.07);
    }

    header img{
        height:50px;
    }

    .login-btn{
        background:linear-gradient(180deg,#ffd24a,#ffb400);
        padding:10px 18px;
        border-radius:18px;
        color:#000;
        font-weight:700;
    }

    /* LOGIN CARD */
    .login-card{
        max-width:420px;
        margin:40px auto;
        background:rgba(0,0,0,0.25);
        padding:30px;
        border-radius:18px;
        box-shadow:0 10px 40px rgba(0,0,0,0.4);
        background-image:url("jok.jpg");
        background-size:cover;
        background-position:center;
    }

    .title{
        font-size:28px;
        font-weight:900;
        text-align:center;
        margin-bottom:6px;
    }

    .line{
        width:130px;
        height:3px;
        background:#00ff40;
        margin:6px auto 24px;
        border-radius:6px;
    }

    .input-group{
        margin-bottom:18px;
    }
    .input-group label{
        font-size:15px;
        color:#e8e8e8;
    }

    .input-group input{
        width:100%;
        padding:14px;
        border-radius:30px;
        border:1px solid rgba(255,255,255,0.35);
        background:rgba(0,0,0,0.15);
        margin-top:6px;
        color:#fff;
        font-size:15px;
    }

    .submit-btn{
        width:100%;
        padding:14px;
        margin-top:14px;
        border-radius:30px;
        background:#00b050;
        color:#fff;
        font-weight:700;
        font-size:17px;
        border:none;
    }
</style>
</head>

<body>

<!-- HEADER -->
<header>
    <a href="player_home.html">
        <img src="joker216-logo.png" alt="logo">
    </a>
    <a class="login-btn">SE CONNECTER</a>
</header>

<!-- LOGIN CARD REAL -->
<div class="login-card">

    <div class="title">Se connecter</div>
    <div class="line"></div>

    <form id="loginForm">
        <div class="input-group">
            <label>Nom d'utilisateur</label>
            <input type="text" id="username" required>
        </div>

        <div class="input-group">
            <label>Mot de passe</label>
            <input type="password" id="password" required>
        </div>

        <button type="submit" class="submit-btn">Se connecter</button>
    </form>

</div>

<script>
const BIN_ID = "692eeefbae596e708f7e9e72";
const API_KEY = "$2a$10$hCALb9EdUjLfi38M4RhCMOdm8.1y36yYtLvW0BYdZTfqjpHtlAY7S";

document.getElementById("loginForm").addEventListener("submit", async function(e){
    e.preventDefault();

    const user = document.getElementById("username").value.trim();
    const pass = document.getElementById("password").value.trim();

    try {
        const res = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
            headers: { "X-Master-Key": API_KEY }
        });

        const data = await res.json();
        const players = data.record.users;

        if (!players[user] || players[user].password !== pass){
            alert("Nom d'utilisateur ou mot de passe incorrect !");
            return;
        }

        const found = {
            username: user,
            balance: players[user].balance
        };

        localStorage.setItem("loggedUser", JSON.stringify(found));

        window.location.href = "player_home.html";

    } catch(err){
        alert("Erreur de connexion au serveur !");
    }
});
</script>

</body>
</html>
