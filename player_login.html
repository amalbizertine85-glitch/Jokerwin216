<script>
const BIN_ID = "692eeefbae596e708f7e9e72";
const API_KEY = "$2a$10$hCALb9EdUjLfi38M4RhCMOdm8.1y36yYtLvW0BYdZTfqjpHtlAY7S";

/* login function */
async function loginPlayer(){
    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value.trim();

    if(!username || !password){
        alert("Please enter username and password");
        return;
    }

    // fetch bin
    const res = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}`,{
        headers:{ "X-Master-Key": API_KEY }
    });
    const data = await res.json();
    const users = data.record;

    // check user
    if(!users[username]){
        alert("Username not found");
        return;
    }

    // check password
    if(users[username].password !== password){
        alert("Wrong password");
        return;
    }

    // save login
    localStorage.setItem("logged", username);

    // redirect to player home
    window.location.href = "player_home.html";
}
</script>
