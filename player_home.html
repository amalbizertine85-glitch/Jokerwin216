<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Joker216 — Home</title>

<style>
  .popup-overlay {
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.6);
    display: none;
    justify-content: flex-end;
    align-items: flex-end;
    z-index: 9999;
  }

  .popup-box {
    width: 100%;
    background: #021523;
    color: white;
    padding: 20px;
    border-radius: 20px 20px 0 0;
    transform: translateY(100%);
    transition: 0.3s ease;
  }

  .popup-header {
    font-size: 22px;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
  }

  .popup-item {
    padding: 15px 0;
    border-bottom: 1px solid #0c2b3c;
    display: flex;
    justify-content: space-between;
    font-size: 18px;
    cursor: pointer;
  }

  .arrow {
    color: #ffd700;
    font-size: 20px;
  }

  .close-btn {
    font-size: 28px;
    cursor: pointer;
  }

  :root{
    --bg:#052e24;
    --neon:#00ff40;
    --panel:#0b3a2e;
    --panel-2:#073026;
    --muted:rgba(255,255,255,0.78);
    --max-w:1200px;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:#fff;font-family:"Segoe UI",Arial,sans-serif}
  a{text-decoration:none;color:inherit}

  /* HEADER */
  header{
    position:sticky;top:0;z-index:99;
    background:rgba(0,0,0,0.18);
    border-bottom:1px solid rgba(255,255,255,0.1);
  }
  .topbar{
    max-width:var(--max-w);
    margin:0 auto;
    padding:12px 16px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
  }
  .brand img{
    height:48px;width:auto;
  }

  .player-block{
    text-align:center;
    color:white;
    font-size:15px;
    line-height:1.1;
  }
  .player-block .name { font-weight:800; color:var(--neon); display:block; }
  .player-block .balance { font-weight:700; font-size:13px; color:#dbe; display:block; }

  .connect-btn{
    background:linear-gradient(180deg,#ffd24a,#ffb400);
    padding:8px 14px;
    border-radius:24px;
    border:0;
    font-weight:800;
    cursor:pointer;
  }

  /* NAVBAR PILL */
  .menu-wrap{
    display:flex;
    justify-content:center;
    margin-bottom:10px;
  }
  .menu{
    background:rgba(255,255,255,0.07);
    backdrop-filter:blur(8px);
    padding:10px 18px;
    border-radius:40px;
    display:flex;
    gap:22px;
    overflow-x:auto;
  }
  .menu::-webkit-scrollbar{display:none;}
  .menu a{
    color:#b6c7c7;
    font-weight:700;
    font-size:15px;
    padding:8px 14px;
    border-radius:20px;
    white-space:nowrap;
  }
  .menu a.active{
    color:var(--neon);
    background:rgba(0,255,64,0.12);
    box-shadow:inset 0 -3px 0 var(--neon);
  }

  /* SLIDER */
  .slider{
    width:100%;
    height:100px;
    border-radius:12px;
    overflow:hidden;
    margin-bottom:14px;
    box-shadow:0 14px 40px rgba(0,0,0,0.5);
    border:1px solid rgba(255,255,255,0.1);
  }
  .slides{
    display:flex;
    height:100%;
    transition:transform .6s ease;
  }
  .slide{
    min-width:100%;
    height:100%;
    background-size:cover;
    background-position:center;
    display:flex;
    align-items:center;
    padding-left:28px;
  }
  .dots{
    display:flex;
    justify-content:center;
    gap:8px;
    margin-top:8px;
  }
  .dot{
    width:10px;height:10px;border-radius:50%;
    background:rgba(255,255,255,0.25);
    cursor:pointer;
  }
  .dot.active{
    background:var(--neon);
    box-shadow:0 0 8px var(--neon);
  }
  .jackpot-img-box{
    width:95%;
    margin:15px auto 0 auto;
    border-radius:14px;
    overflow:hidden;
  }
  .jackpot-only{
    width:100%;
    height:auto;
    display:block;
    border-radius:14px;
  }

  .four-img-grid{
    margin:18px auto;
    max-width:900px;
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:14px;
  }
  .img-box{
    background:rgba(255,255,255,0.04);
    border-radius:14px;
    overflow:hidden;
    border:1px solid rgba(255,255,255,0.05);
  }
  .img-box img{ width:100%; height:120px; object-fit:cover; display:block; }

  .slots-row{
    margin-top:14px;
    display:flex;
    gap:14px;
    overflow-x:auto;
    padding-bottom:4px;
  }
  .slots-row::-webkit-scrollbar{display:none;}
  .slot-box{
    min-width:130px;
    height:170px;
    background:rgba(255,255,255,0.05);
    border-radius:12px;
    overflow:hidden;
    flex-shrink:0;
    border:1px solid rgba(255,255,255,0.08);
  }
  .slot-box img{ width:100%; height:100%; object-fit:cover; display:block; }
  .slot-box.empty{ background:rgba(255,255,255,0.03); }

  /* small screens tweaks */
  @media (max-width:480px){
    .topbar{ padding:10px; gap:8px; }
    .player-block{ font-size:13px; }
    .slider{ height:140px; }
  }
</style>
</head>

<body>

<!-- HEADER -->
<header>
  <div class="topbar">
    <div class="brand"><a href="player_home.html"><img src="joker216-logo.png" alt="logo"></a></div>

    <!-- player info box -->
    <div id="playerInfo" class="player-block" aria-live="polite">
      <span id="playerName" class="name"></span>
      <span id="playerBalance" class="balance"></span>
    </div>

    <!-- logout button -->
    <div>
      <button id="logoutBtn" class="connect-btn" onclick="logout()">Logout</button>
    </div>
  </div>

  <div class="menu-wrap">
    <nav class="menu">
      <a href="player_home.html" class="active">Accueil</a>
      <a href="#" onclick="openSportPopup(); return false;">Sport</a>
      <a href="casino.html">Le Casino</a>
      <a href="live_casino.html">Casino en Direct</a>
      <a href="crash.html">Jeux de Crash</a>
    </nav>
  </div>
</header>

<!-- SLIDER -->
<div class="slider" id="slider">
  <div class="slides" id="slides">
    <div class="slide" style="background-image:url('1.png')"></div>
    <div class="slide" style="background-image:url('2.png')"></div>
    <div class="slide" style="background-image:url('3.png')"></div>
  </div>
</div>
<div class="dots" id="dots"></div>

<!-- JACKPOT IMAGE ONLY -->
<div class="jackpot-img-box">
  <img src="jackpot.png" alt="Jackpot" class="jackpot-only">
</div>

<!-- QUICK 4 IMG BOXES -->
<div class="four-img-grid">
  <div class="img-box"><img src="games.png" alt=""></div>
  <div class="img-box"><img src="sport.png" alt=""></div>
  <div class="img-box"><img src="casino-live.png" alt=""></div>
  <div class="img-box"><img src="crash.png" alt=""></div>
</div>

<!-- MACHINES -->
<div class="section">
  <div class="title">
    <h4>Machines à sous populaires</h4>
    <span style="color:var(--muted)">Tout &gt;</span>
  </div>

  <div class="slots-row">
    <div class="slot-box"><img src="3_buzzing_wilds.jpg" alt=""></div>
    <div class="slot-box"><img src="3_dancing_monkeys.jpg" alt=""></div>
    <div class="slot-box"><img src="alaaddin.jpg" alt=""></div>
    <div class="slot-box empty"></div>
    <div class="slot-box empty"></div>
    <div class="slot-box empty"></div>
  </div>
</div>

<!-- SPORT POPUP markup (kept here in body) -->
<div id="sportPopup" class="popup-overlay" onclick="closeSportPopup()">
  <div id="sportBox" class="popup-box" onclick="event.stopPropagation()">
    <div class="popup-header">
      <span>Sport</span>
      <span class="close-btn" onclick="closeSportPopup()">×</span>
    </div>

    <div class="popup-item" onclick="selectSport(1)">
      Sport 1 <span class="arrow">➔</span>
    </div>

    <div class="popup-item" onclick="selectSport(2)">
      Sport 2 <span class="arrow">➔</span>
    </div>
  </div>
</div>

<script>
/* SLIDER */
let index = 0;
const slides = document.getElementById("slides");
const dotsContainer = document.getElementById("dots");
const total = slides.children.length;

/* create dots */
for(let i=0;i<total;i++){
  const d = document.createElement("div");
  d.className = "dot" + (i===0 ? " active":"");
  d.onclick = ()=>go(i);
  dotsContainer.appendChild(d);
}
const dots = dotsContainer.children;

function go(i){
  index = i;
  slides.style.transform = `translateX(-${i*100}%)`;
  for(let x=0;x<dots.length;x++){
    dots[x].classList.toggle("active", x===i);
  }
}
setInterval(()=>go((index+1)%total), 3500);

/* SPORT POPUP functions */
function openSportPopup() {
  document.getElementById("sportPopup").style.display = "flex";
  document.getElementById("sportBox").style.transform = "translateY(0)";
}

function closeSportPopup() {
  document.getElementById("sportPopup").style.display = "none";
  document.getElementById("sportBox").style.transform = "translateY(100%)";
}

/* when user chooses a sport */
function selectSport(id){
  closeSportPopup();
  // Sport 1 => sports_betting.html (you can add params if needed)
  if(id === 1){
    window.location.href = "sports_betting.html";
  } else {
    // placeholder for sport 2
    alert("Sport 2 (à implémenter)");
  }
}

/* Auth: read logged user from localStorage and update UI */
(function initPlayer(){
  try {
    const raw = localStorage.getItem("loggedUser");
    if(!raw){
      // not logged in -> redirect to login page
      window.location.href = "login.html";
      return;
    }
    const u = JSON.parse(raw);
    // safety: check fields
    const nameEl = document.getElementById("playerName");
    const balEl  = document.getElementById("playerBalance");
    if(nameEl && balEl && u && u.username !== undefined){
      nameEl.textContent = u.username;
      // format balance to two decimals
      const b = (typeof u.balance === 'number') ? u.balance : parseFloat(u.balance || 0);
      balEl.textContent = (isNaN(b) ? "0.00" : b.toFixed(2)) + " TND";
    } else {
      // if data invalid -> logout and redirect
      localStorage.removeItem("loggedUser");
      window.location.href = "login.html";
    }
  } catch(e){
    console.error("initPlayer error", e);
    localStorage.removeItem("loggedUser");
    window.location.href = "login.html";
  }
})();

/* logout function */
function logout(){
  localStorage.removeItem("loggedUser");
  window.location.href = "player_login.html";
}
</script>

</body>
</html>
